{"version":3,"sources":["webpack:///./src/components/common/search/SearchMain.vue?e824","webpack:///./src/components/common/search/SearchMain.vue?150e","webpack:///./src/network/search.js","webpack:///src/components/common/search/SearchMain.vue","webpack:///./src/components/common/search/SearchMain.vue?b724","webpack:///./src/components/common/search/SearchMain.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","_v","_s","keywords","totals","attrs","playList","on","playMusicList","scopedSlots","_u","key","fn","scope","$event","preventDefault","stopPropagation","addCollect","row","id","class","currIndex","_f","duration","staticRenderFns","getSearchAll","limit","offset","type","request","url","params","name","data","methods","getMusicUrl","getMusicMenu","created","$route","filters","showTime","watch","to","component"],"mappings":"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","file":"js/chunk-ba3b75cc.ba8e3597.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchMain.vue?vue&type=style&index=0&id=6522c9a0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchMain.vue?vue&type=style&index=0&id=6522c9a0&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\"},[_c('h2',{staticStyle:{\"color\":\"#888\",\"fontSize\":\"14px\"}},[_vm._v(\" 搜索 \"),_c('span',{staticStyle:{\"color\":\"#5292fe\"}},[_vm._v(\"“\"+_vm._s(_vm.keywords)+\"”\")]),_vm._v(\"找到 \"),_c('span',{staticStyle:{\"color\":\"#333\"}},[_vm._v(_vm._s(_vm.totals))]),_vm._v(\"首单曲 \")]),_c('div',{staticStyle:{\"width\":\"90%\",\"margin\":\"0 auto\",\"marginTop\":\"10px\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.playList,\"lazy\":true},on:{\"row-dblclick\":_vm.playMusicList}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"70\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"70\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('a',{staticClass:\"icon\",attrs:{\"href\":\"\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.addCollect(scope.row.id)}}},[_c('i',{class:[scope.row.id === _vm.currIndex ? 'el-icon-star-on':'el-icon-star-off']})])}}])},[_c('a',{staticClass:\"icon\",attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"el-icon-download\"})])]),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"音乐标题\",\"width\":\"280\"}}),_c('el-table-column',{attrs:{\"prop\":\"artists[0].name\",\"label\":\"歌手\",\"width\":\"200\"}}),_c('el-table-column',{attrs:{\"prop\":\"album.name\",\"label\":\"专辑\"}}),_c('el-table-column',{attrs:{\"label\":\"时长\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _c('span',{},[_vm._v(_vm._s(_vm._f(\"showTime\")(scope.row.duration)))])}}])})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { request } from './request'\r\n\r\nexport function getSearchAll(keywords,limit=30,offset=0,type=1000) {\r\n    return request({\r\n        url: \"/search\",\r\n        params:{\r\n            keywords,\r\n            limit,\r\n            offset,\r\n            type,\r\n        }\r\n    })\r\n}","<template>\r\n  <div class=\"search\">\r\n    <h2 style=\"color:#888;fontSize:14px;\">\r\n      搜索\r\n      <span style=\"color:#5292fe\">“{{keywords}}”</span>找到\r\n      <span style=\"color:#333\">{{totals}}</span>首单曲\r\n    </h2>\r\n    <div style=\"width:90%;margin:0 auto;marginTop:10px;\">\r\n      <el-table :data=\"playList\" style=\"width: 100%\" :lazy=\"true\" @row-dblclick=\"playMusicList\">\r\n        <el-table-column type=\"index\" width=\"70\"></el-table-column>\r\n        <el-table-column label=\"操作\" width=\"70\">\r\n          <a href class=\"icon\" slot-scope=\"scope\" @click.prevent.stop=\"addCollect(scope.row.id)\">\r\n            <i :class=\"[scope.row.id === currIndex ? 'el-icon-star-on':'el-icon-star-off']\"></i>\r\n            <!-- <i class=\"el-icon-star-on\" ></i> -->\r\n          </a>\r\n          <a href=\"#\" class=\"icon\">\r\n            <i class=\"el-icon-download\"></i>\r\n          </a>\r\n        </el-table-column>\r\n        <el-table-column prop=\"name\" label=\"音乐标题\" width=\"280\"></el-table-column>\r\n        <el-table-column prop=\"artists[0].name\" label=\"歌手\" width=\"200\"></el-table-column>\r\n        <el-table-column prop=\"album.name\" label=\"专辑\"></el-table-column>\r\n        <el-table-column label=\"时长\" width=\"100\">\r\n          <span slot-scope=\"scope\">{{scope.row.duration | showTime}}</span>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSearchAll } from \"network/search\";\r\nimport { timeFormat } from \"common/uctil\";\r\nimport { getMusicUrl, getMusicMenu } from \"network/home\";\r\nimport { NOW_MUSICMENU, NOW_MUSIC } from \"@/store/mutationType\";\r\nexport default {\r\n  name: \"SearchMain\",\r\n  data() {\r\n    return {\r\n      keywords: \"\",\r\n      totals: 0,\r\n      playList: [],\r\n      currIndex: 0,\r\n    };\r\n  },\r\n  methods: {\r\n    //播放音乐\r\n    playMusicList(row) {\r\n      // console.log(row.id);\r\n      this.getMusicUrl(row.id);\r\n      this.getMusicMenu(row.id);\r\n    },\r\n    //加入收藏\r\n    addCollect(id) {\r\n      this.currIndex = id;\r\n      // console.log(id);\r\n    },\r\n    //获取搜索的所有歌曲\r\n    getSearchAll(keywords, limit, offset, type) {\r\n      getSearchAll(keywords, limit, offset, type).then((res) => {\r\n        // console.log(res);\r\n        this.totals = res.result.songCount;\r\n        this.playList = res.result.songs;\r\n        // console.log(this.totals);\r\n        // console.log(this.playList);\r\n      });\r\n    },\r\n    //设置当前播放地址\r\n    getMusicUrl(id) {\r\n      getMusicUrl(id).then((res) => {\r\n        this.$store.commit(NOW_MUSIC, res.data[0].url);\r\n      });\r\n    },\r\n    //设置当前播放信息\r\n    getMusicMenu(id) {\r\n      getMusicMenu(id).then((res) => {\r\n        this.$store.commit(NOW_MUSICMENU, res.songs[0]);\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    // this.getSearchAll();\r\n    this.keywords = this.$route.params.keywords;\r\n    // console.log(this.keywords);\r\n    this.getSearchAll(this.keywords, 30, 0, 1);\r\n  },\r\n  filters: {\r\n    showTime(value) {\r\n      return timeFormat(value);\r\n    },\r\n  },\r\n  watch: {\r\n    // 利用watch方法检测路由变化：\r\n    $route: function (to, from) {\r\n      // 拿到目标参数 to.params.id 去再次请求数据接口\r\n      // console.log(to.params.keywords);\r\n      if(to.params.keywords === undefined) return;\r\n      this.keywords = to.params.keywords;\r\n      this.getSearchAll(this.keywords, 30, 0, 1);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.icon i {\r\n  color: #ccc;\r\n  font-size: 17px;\r\n  margin-right: 5px;\r\n}\r\n.icon:hover i {\r\n  color: red;\r\n}\r\n.search {\r\n  width: 100%;\r\n  max-height: 630px;\r\n  padding-top: 25px;\r\n  overflow: auto;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchMain.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchMain.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchMain.vue?vue&type=template&id=6522c9a0&scoped=true&\"\nimport script from \"./SearchMain.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchMain.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchMain.vue?vue&type=style&index=0&id=6522c9a0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6522c9a0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}